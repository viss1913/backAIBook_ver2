# –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–∑ Gen-API Z-Image

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–∞—Ä—Ç–∏–Ω–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞—Å—å –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ Gen-API (–≤–∏–¥–Ω–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ), –Ω–æ –Ω–∞—à —Å–∫—Ä–∏–ø—Ç –µ—ë –Ω–µ –ø–æ–ª—É—á–∏–ª.

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Gen-API (2 —ç—Ç–∞–ø–∞)

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `https://api.gen-api.ru/api/v1/networks/z-image`
2. –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç —Å `request_id` –∏ —Å—Ç–∞—Ç—É—Å–æ–º `"starting"`
3. ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í —ç—Ç–æ–º –æ—Ç–≤–µ—Ç–µ –ù–ï–¢ –∫–∞—Ä—Ç–∏–Ω–∫–∏! –¢–æ–ª—å–∫–æ `request_id` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```javascript
const response = await axios.post(
  'https://api.gen-api.ru/api/v1/networks/z-image',
  {
    prompt: '–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä –≤ –•–æ–≥–≤–∞—Ä—Ç—Å–µ',
    width: 992,
    height: 992,
    model: 'turbo',
    output_format: 'png'
  },
  {
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${GEN_API_KEY}`
    }
  }
);
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–≠–¢–ê–ü 1):**
```json
{
  "request_id": 12345678,
  "status": "starting",
  "input": {
    "prompt": "–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä –≤ –•–æ–≥–≤–∞—Ä—Ç—Å–µ",
    "width": 992,
    "height": 992
  }
}
```

**–ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º:**
- –°–æ—Ö—Ä–∞–Ω—è–µ–º `request_id` –∏–∑ –æ—Ç–≤–µ—Ç–∞
- –ù–ï –∏—â–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ —ç—Ç–æ–º –æ—Ç–≤–µ—Ç–µ (–µ—ë —Ç–∞–º –Ω–µ—Ç!)

---

### –≠—Ç–∞–ø 2: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–∞—Ä—Ç–∏–Ω–∫–∞)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç 20-60 —Å–µ–∫—É–Ω–¥
2. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ `request_id`
3. ‚úÖ **–ö–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–ª–µ `output` –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞!**

**–î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**

#### –°–ø–æ—Å–æ–± –ê: Long Polling (–æ–ø—Ä–∞—à–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å)

–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º GET –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏:

```javascript
// –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
const endpoints = [
  `https://api.gen-api.ru/api/v1/requests/${requestId}`,
  `https://api.gen-api.ru/api/v1/networks/z-image/${requestId}`,
  `https://api.gen-api.ru/api/v1/networks/z-image/requests/${requestId}`,
  // ... –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
];

for (const endpoint of endpoints) {
  try {
    const response = await axios.get(endpoint, {
      headers: {
        'Accept': 'application/json',
        'Authorization': `Bearer ${GEN_API_KEY}`
      }
    });
    
    const data = response.data;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
    if (data.status === 'success') {
      // ‚úÖ –ì–æ—Ç–æ–≤–æ! –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤ data.output
      return data;
    } else if (data.status === 'processing' || data.status === 'starting') {
      // ‚è≥ –ï—â–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –∂–¥–µ–º –∏ –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞
      await sleep(3000); // –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã
      continue;
    }
  } catch (error) {
    // –≠–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π
    continue;
  }
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–≠–¢–ê–ü 2 - –£–°–ü–ï–•):**
```json
{
  "request_id": 12345678,
  "status": "success",
  "response_type": "image",
  "output": {
    // ‚ö†Ô∏è –í–û–¢ –¢–£–¢ –ö–ê–†–¢–ò–ù–ö–ê! –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–π:
    
    // –í–∞—Ä–∏–∞–Ω—Ç 1: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤
    "images": [
      {
        "url": "https://cdn.gen-api.ru/images/abc123.png"
      }
    ],
    
    // –ò–õ–ò –í–∞—Ä–∏–∞–Ω—Ç 2: –ø—Ä—è–º–æ–π URL
    "image_url": "https://cdn.gen-api.ru/images/abc123.png",
    
    // –ò–õ–ò –í–∞—Ä–∏–∞–Ω—Ç 3: base64
    "image": "data:image/png;base64,iVBORw0KGgoAAAANS..."
  }
}
```

#### –°–ø–æ—Å–æ–± –ë: Callback URL

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —É–∫–∞–∑—ã–≤–∞–µ–º `callback_url`:

```javascript
const response = await axios.post(
  'https://api.gen-api.ru/api/v1/networks/z-image',
  {
    prompt: '–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä –≤ –•–æ–≥–≤–∞—Ä—Ç—Å–µ',
    callback_url: 'https://–Ω–∞—à-—Å–µ—Ä–≤–µ—Ä.ru/api/gen-api-callback', // ‚¨ÖÔ∏è –ù–∞—à —ç–Ω–¥–ø–æ–∏–Ω—Ç
    // ... –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  },
  { headers: { ... } }
);
```

Gen-API –æ—Ç–ø—Ä–∞–≤–∏—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ –Ω–∞—à `callback_url` —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ).

---

## –ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º –≤ –∫–æ–¥–µ (–ø–æ—à–∞–≥–æ–≤–æ)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º –∑–∞–¥–∞—á—É ‚úÖ

```javascript
// –§–∞–π–ª: test-gen-api-direct-longpoll.js
// –§—É–Ω–∫—Ü–∏—è: createGenApiTask()

const taskResult = await createGenApiTask(prompt, options);
// –ü–æ–ª—É—á–∞–µ–º: { request_id: 12345678, status: "starting" }

const requestId = taskResult.request_id;
console.log('Request ID:', requestId);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—É—á–∏–ª–∏ `request_id`, –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞.

---

### –®–∞–≥ 2: Long Polling –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ‚ö†Ô∏è

```javascript
// –§—É–Ω–∫—Ü–∏—è: pollGenApiResult(requestId)

// –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
const endpoints = [
  `${GEN_API_BASE}/requests/${requestId}`,
  `${GEN_API_BASE}/networks/z-image/${requestId}`,
  // ... –∏ —Ç.–¥.
];

// –û–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
for (let attempt = 1; attempt <= 60; attempt++) {
  for (const endpoint of endpoints) {
    const response = await axios.get(endpoint, { ... });
    const data = response.data;
    
    if (data.status === 'success') {
      return data; // ‚úÖ –ù–∞—à–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç!
    }
  }
  await sleep(3000); // –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–æ–∑–º–æ–∂–Ω–æ, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏–ª–∏ –æ–Ω –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `status: "success"`.

---

### –®–∞–≥ 3: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–∑ `output` ‚ö†Ô∏è

```javascript
// –§—É–Ω–∫—Ü–∏—è: extractImageUrl(result)

const output = result.output; // ‚¨ÖÔ∏è –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–¥–µ—Å—å!

// –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
if (output.images && Array.isArray(output.images)) {
  return output.images[0].url; // –í–∞—Ä–∏–∞–Ω—Ç 1
}
if (output.image_url) {
  return output.image_url; // –í–∞—Ä–∏–∞–Ω—Ç 2
}
if (output.image) {
  return output.image; // –í–∞—Ä–∏–∞–Ω—Ç 3 (–º–æ–∂–µ—Ç –±—ã—Ç—å base64)
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `output` –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–π.

---

## –ì–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è long polling

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 404
- –ò–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–æ `status` –≤—Å–µ–≥–¥–∞ `"starting"` –∏–ª–∏ `"processing"`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Gen-API: https://gen-api.ru/docs
2. –ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ Z-Image
3. –í–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç: `/networks/z-image/status/{request_id}`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```javascript
// –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
const testEndpoints = [
  `/requests/${requestId}`,
  `/networks/z-image/${requestId}`,
  `/networks/z-image/requests/${requestId}`,
  `/networks/z-image/status/${requestId}`,
  `/networks/z-image/result/${requestId}`,
  `/tasks/${requestId}`,
  `/status/${requestId}`,
  `/result/${requestId}`
];
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `output` –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–π

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü–æ–ª—É—á–∏–ª–∏ `status: "success"` –∏ `output`, –Ω–æ –Ω–µ –º–æ–∂–µ–º –Ω–∞–π—Ç–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É
- `output` –µ—Å—Ç—å, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ —Ç–∞, —á—Ç–æ –º—ã –æ–∂–∏–¥–∞–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
1. **–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π `output`** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
```javascript
console.log('–ü–æ–ª–Ω—ã–π output:', JSON.stringify(result.output, null, 2));
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Gen-API, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–∞–º

3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```javascript
// –ï—Å–ª–∏ output - —ç—Ç–æ –º–∞—Å—Å–∏–≤:
if (Array.isArray(result.output)) {
  const firstItem = result.output[0];
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–ª—è
  console.log('–ü–æ–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:', Object.keys(firstItem));
  // –ú–æ–∂–µ—Ç –±—ã—Ç—å: firstItem.url, firstItem.image_url, firstItem.image, –∏ —Ç.–¥.
}

// –ï—Å–ª–∏ output - —ç—Ç–æ –æ–±—ä–µ–∫—Ç:
if (typeof result.output === 'object') {
  console.log('–ü–æ–ª—è output:', Object.keys(result.output));
  // –ú–æ–∂–µ—Ç –±—ã—Ç—å: output.url, output.image_url, output.images[], –∏ —Ç.–¥.
}
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –¢–∞–π–º–∞—É—Ç –∏–ª–∏ –∑–∞–¥–∞—á–∞ –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- Long polling –Ω–µ –¥–æ–∂–¥–∞–ª—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- –ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è:
```javascript
const maxAttempts = 120; // –í–º–µ—Å—Ç–æ 60 (6 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 3)
const intervalMs = 5000; // –í–º–µ—Å—Ç–æ 3000 (5 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 3)
```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–ª–ª–µ–≥–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç

**–ó–∞–¥–∞—á–∞:** –ù–∞–π—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Gen-API –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ Z-Image –ø–æ `request_id`.

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
- https://gen-api.ru/docs
- –†–∞–∑–¥–µ–ª –ø—Ä–æ Long-Polling
- –†–∞–∑–¥–µ–ª –ø—Ä–æ Z-Image API

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –¢–æ—á–Ω—ã–π URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/api/v1/networks/z-image/{request_id}`)
- –ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ (GET –∏–ª–∏ POST)
- –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

---

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**

```javascript
// test-get-result-simple.js
import axios from 'axios';
import dotenv from 'dotenv';

dotenv.config();

const GEN_API_KEY = process.env.GEN_API_KEY;
const requestId = 12345678; // ‚¨ÖÔ∏è –í–∑—è—Ç—å –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ Gen-API

// –ü—Ä–æ–±—É–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
const endpoint = `https://api.gen-api.ru/api/v1/networks/z-image/${requestId}`;

axios.get(endpoint, {
  headers: {
    'Accept': 'application/json',
    'Authorization': `Bearer ${GEN_API_KEY}`
  }
})
.then(response => {
  console.log('‚úÖ –£—Å–ø–µ—Ö!');
  console.log('–°—Ç–∞—Ç—É—Å:', response.data.status);
  console.log('–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:', JSON.stringify(response.data, null, 2));
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º output
  if (response.data.output) {
    console.log('\nüì¶ Output –Ω–∞–π–¥–µ–Ω:');
    console.log('–°—Ç—Ä—É–∫—Ç—É—Ä–∞:', JSON.stringify(response.data.output, null, 2));
  }
})
.catch(error => {
  console.error('‚ùå –û—à–∏–±–∫–∞:', error.response?.status);
  console.error('–î–∞–Ω–Ω—ã–µ:', error.response?.data);
});
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å:**
```bash
node test-get-result-simple.js
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ö–∞–∫–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç?
- –ö–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `output`?
- –ì–¥–µ –∏–º–µ–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è URL –∫–∞—Ä—Ç–∏–Ω–∫–∏?

---

### 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —É–∑–Ω–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É `output`, –æ–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `extractImageUrl()`:

```javascript
function extractImageUrl(result) {
  const output = result.output;
  
  // ‚¨áÔ∏è –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ —Ç–µ—Å—Ç–∞ –≤—ã—à–µ
  
  // –ü—Ä–∏–º–µ—Ä –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
  if (output.images && Array.isArray(output.images)) {
    return output.images[0].url; // –ò–ª–∏ output.images[0].image_url
  }
  
  // –ò–ª–∏ –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç:
  if (output.image_url) {
    return output.image_url;
  }
  
  // –ò —Ç.–¥.
}
```

---

## –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `request_id` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ Gen-API)
- [ ] –ù–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Gen-API
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ—Å—Ç—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º
- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É `output` –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ `output` –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ —Ñ–∞–π–ª

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Gen-API: https://gen-api.ru/docs
- Z-Image API: https://gen-api.ru/model/z-image/api
- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç: https://gen-api.ru (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–¥–∞—á –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)

---

## –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ï—Å–ª–∏ –≤–∏–¥–∏–º –≤ –ª–æ–≥–∞—Ö:**
```
–°—Ç–∞—Ç—É—Å: success
Output –Ω–∞–π–¥–µ–Ω: { "images": [{ "url": "https://..." }] }
```
‚Üí –ó–Ω–∞—á–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `output.images[0].url`

**–ï—Å–ª–∏ –≤–∏–¥–∏–º:**
```
–°—Ç–∞—Ç—É—Å: success
Output –Ω–∞–π–¥–µ–Ω: { "image_url": "https://..." }
```
‚Üí –ó–Ω–∞—á–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `output.image_url`

**–ï—Å–ª–∏ –≤–∏–¥–∏–º:**
```
–°—Ç–∞—Ç—É—Å: processing
```
‚Üí –ó–∞–¥–∞—á–∞ –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ–ø—Ä–æ—Å

**–ï—Å–ª–∏ –≤–∏–¥–∏–º:**
```
404 - –Ω–µ –Ω–∞–π–¥–µ–Ω
```
‚Üí –≠–Ω–¥–ø–æ–∏–Ω—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –¥—Ä—É–≥–æ–π

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Gen-API
2. –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Gen-API (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞












